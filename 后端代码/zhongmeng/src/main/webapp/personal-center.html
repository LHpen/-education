<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!-- <meta name="description" content="" />
    <meta name="author" content="" /> -->
    <title>个人中心 消息通知 | 中梦社区</title>
    <link rel="stylesheet" href="assets/css/font-icons/entypo/css/entypo.css">
    <link rel="stylesheet" type="text/css" href="bootstrap-3.3.7/dist/css/bootstrap.css">
    <link rel="stylesheet" href="assets/css/neon-core.css">
    <link rel="stylesheet" href="assets/css/neon-theme.css">
    <link rel="stylesheet" href="assets/css/neon-forms.css">
    <!--<link rel="stylesheet" type="text/css" href="css/message.css">-->


    <script type="text/javascript" src="vue/vue.js"></script>
    <script type="text/javascript" src="vue/vue-resource-1.3.4.js"></script>
    <script type="text/javascript" src="js/context.js"></script>
    <script src="jquery/jquery-3.0.0.js"></script>
    <script type="text/javascript" src="bootstrap-3.3.7/dist/js/bootstrap.min.js"></script>

    <style type="text/css">
        .modal-backdrop {
            z-index: 0;
        }
        .panel-border{
            overflow: hidden;
            margin-top: 32px;
           
            width: 100%;
            border: 2px solid #707070;
            border-radius: 14px;
            -moz-border-radius: 14px;
        }
    </style>
    <script src="assets/js/jquery-1.11.0.min.js"></script>
</head>
<body class="page-body  ">
<div class="page-container">
    <div class="sidebar-menu">
        <header class="logo-env">
            <!-- logo -->
            <div class="logo">
                <a href="#">
                    <span style="font-size: 22px;color: white;">个人中心</span>
                </a>
            </div>
            <!-- logo collapse icon -->
            <div class="sidebar-collapse" >
                <a href="#" class="sidebar-collapse-icon with-animation" style="border: 1px #3c3c3c solid">
                    <i class="entypo-menu"></i>
                </a>
            </div>
            <div class="sidebar-mobile-menu visible-xs">
                <a href="#" class="with-animation"  style="border: 1px #3c3c3c solid">
                    <!-- add class "with-animation" to support animation -->
                    <i class="entypo-menu"></i>
                </a>
            </div>
        </header>

        <ul id="main-menu" class="">
            <!-- 	<li id="search">
                    <form method="get" action="">
                        <input type="text" name="q" class="search-input" placeholder="搜索..." />
                        <button type="submit">
                            <i class="entypo-search"></i>
                        </button>
                    </form>
                </li> -->

            <li class="active opened active">
                 <!--<a href="#" target="iframe_ceshi">-->
                    <!--<i class="entypo-gauge"></i>-->
                    <!--<span>消息</span>-->
                <!--</a> -->
                <ul>
                    <li>
                        <a href="xs.html" target="iframe_ceshi">
                            <i class="entypo-layout"></i>
                            <span>我的消息</span>
                        </a>

                    </li>
                    <li>
                        <a href="vip.html" target="iframe_ceshi">
                            <i class="entypo-monitor"></i>
                            <span>我的课程</span>
                        </a>
                    </li>
                    <li>
                        <a href="bebe.html" target="iframe_ceshi">
                            <i class="entypo-monitor"></i>
                            <span>我的活动</span>
                        </a>
                    </li>
                    <li>
                        <a href="bebe.html" target="iframe_ceshi">
                            <i class="entypo-monitor"></i>
                            <span>我的开班</span>
                        </a>
                    </li>
                    <li>
                        <a href="bebe.html" target="iframe_ceshi">
                            <i class="entypo-monitor"></i>
                            <span>我的获奖通知</span>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>

    </div>


    <div id="app" class="main-content">
        <section class="main ">
            <div class="panel panel-defalut">
                <header class="message panel-heading">

                    <span class="message-item glyphicon" style="font-size: 20px;margin-left: 20px;">消息</span>

                    <div class="message-center">
                        <span class="message-title"></span>
                    </div>
                    <a href="javascript:;" class="message-item">
                        <i class="icon icon-sys"></i>
                    </a>

                </header>
            </div>
            <section style="margin-top: -12px;margin-bottom: 60px;">
                <hr/>
                <div class="form-group" style="margin-bottom: 2px;">
                    <label for="ntype" class="col-sm-1 control-label">通知类型：</label>
                <div class="col-sm-11">
                    <select class="form-control" v-model="ntype"  id="ntype">
                        <option value="" selected="selected">请选择通知类型</option>
                        <option value="活动">活动</option>
                        <option value="新开课程">新课程</option>
                        <option value="新教师">新教师</option>
                        <option value="新开班">新开班</option>
                        <option value="获奖通知">获奖通知</option>
                    </select>
                </div>
                </div>

            </section>
            <section class="banner" style="margin-top: 8px;">
                <div class="banner-nav">
                    <!--  <ul class="nav-top">

                     </ul> -->
                    <div class="panel">
                        <div class="panel-panel panel-active">
                            <div class="panel-item">

                                <div class="panel-text" v-for="(item, i) in arrayData" :key="i">
                                    <div class="p anel-texts b-line">
                                        <div class="panel-border">
                                        <div class="row">
                                        <div class="col-md-10 col-md-offset-2" @click="content(item.nid)">
                                            <h2>{{item.ntheme}}</a></h2>
                                        </div> 
                                    </div>
                                        <div class="row">
                                        <div class="col-md-10 col-md-offset-2">
                                            <p>{{item.ntype}}</p>
                                        </div>
                                        

                                    </div>
                                </div>
                            </div>
                        </div>
                              

                                <!-- 分页按钮 -->
                                <div class="pager" id="pager">
						<span class="form-inline">
							<select class="form-control" v-model="pagesize" v-on:change="showPage(1)" number>
								<option value="8">8</option>
								<option value="20">20</option>
								<option value="30">30</option>
								<option value="40">40</option>
							</select>
						</span>
                                    <template v-for="item in pageCount+1">
							<span v-if="item==1" class="btn btn-default" v-on:click="showPage(1)">
								首页
							</span>
                                        <span v-if="item==1" class="btn btn-default"
                                              v-on:click="showPage(pageCurrent-1)">
								上一页
							</span>
                                        <span v-if="item==1" class="btn btn-default active" @click="showPage(item)">
								{{item}}
							</span>
                                        <span v-if="item==1&&item<showPagesStart-1" class="btn btn-default disabled">
								...
							</span>
                                        <span v-if="item>1&&item<=pageCount-1&&item>=showPagesStart&&item<=showPageEnd&&item<=pageCount"
                                              class="btn btn-default"
                                              v-on:click="showPage(item)">
								{{item}}
							</span>
                                        <span v-if="item==pageCount&&item>showPageEnd+1"
                                              class="btn btn-default disabled">
								...
							</span>
                                        <span v-if="item==pageCount&&pageCount!=1" class="btn btn-default"
                                              v-on:click="showPage(item)">
								{{item}}
							</span>
                                        <span v-if="item==pageCount" class="btn btn-default"
                                              v-on:click="showPage(pageCurrent+1)">
								下一页
							</span>
                                        <span v-if="item==pageCount" class="btn btn-default"
                                              v-on:click="showPage(pageCount)">
								尾页
							</span>
                                    </template>
                                    <span class="form-inline">
							<input class="pageIndex form-control" style="width:60px;text-align:center" type="text"
                                   v-model="pageCurrent"
                                   v-on:keyup.enter="showPage(pageCurrent)"/>
						</span>
                                    <span>{{pageCurrent}}/{{pageCount}}</span>
                                </div>
                           </div>
                       
                </div>
            </section>
        </section>
    </div>
</div>

<script>
    Vue.http.options.root = httpUrl; //httpUrl在context定义
    Vue.http.options.emulateJSON = true;
    Vue.http.interceptors.push(function (request, next) { //拦截器
        // 跨域携带cookie
        request.credentials = true;
        next();
    })
    var vm = new Vue({
        el: '#app',
        data: {

            //分页数
            pageCount: 1,
            //当前页面
            pageCurrent: 1,
            //分页大小
            pagesize: 8,
            //显示分页按钮数
            showPages: 10,
            //开始显示的分页按钮
            showPagesStart: 1,
            //结束显示的分页按钮
            showPageEnd: '',
            //分页数据
            arrayData: '',
            ntype:""
        },
        created: function () {
            this.showPage(1);
        },
        methods: {
            content:function(nid){
                sessionStorage.setItem("nid",nid);
                window.location.href="message-text.html";
            },
            //分页方法
            showPage: function (pageIndex) {

                if (pageIndex > 0) {

                    if (pageIndex > this.pageCount) {
                        pageIndex = this.pageCount;
                    } else {
                        this.pageCurrent = pageIndex;
                    }
                    //处理分页点中样式
                    var buttons = $("#pager").find("span");
                    for (var i = 0; i < buttons.length; i++) {
                        if (buttons.eq(i).html() == pageIndex) {
                            buttons.eq(i).addClass("active");
                        } else {
                            buttons.eq(i).removeClass("active");
                        }
                    }

                    this.$http.get('NotifyPortal/list', {
                        params: {
                            "pageNum": pageIndex,
                            "pageSize": this.pagesize,
                        }
                    }).then(function (result) {
                        var msg = result.body;
                        this.arrayData = msg.list;
                        this.pageCount = msg.pages;
                        this.showPageEnd = msg.lastPage;
                    })


                    //计算分页按钮数据
                    if (this.pageCount > this.showPages) {
                        if (pageIndex <= this.showPages / 2) { //pageIndex<=5
                            this.showPagesStart = 1;

                        } else if (pageIndex >= this.pageCount - (this.showPages - 3) / 2) { //pageIndex>=9
                            this.showPagesStart = this.pageCount - this.showPages + 2; //1

                        } else {
                            this.showPagesStart = pageIndex - (this.showPages - 3) / 2;

                        }
                    }

                }

            },
        },
    });
</script>
<link rel="stylesheet" href="assets/js/jvectormap/jquery-jvectormap-1.2.2.css">
<link rel="stylesheet" href="assets/js/rickshaw/rickshaw.min.css">

<!-- Bottom Scripts -->
<script src="assets/js/gsap/main-gsap.js"></script>
<script src="assets/js/jquery-ui/js/jquery-ui-1.10.3.minimal.min.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/joinable.js"></script>
<script src="assets/js/resizeable.js"></script>
<script src="assets/js/neon-api.js"></script>
<script src="assets/js/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="assets/js/jvectormap/jquery-jvectormap-europe-merc-en.js"></script>
<script src="assets/js/jquery.sparkline.min.js"></script>
<script src="assets/js/rickshaw/vendor/d3.v3.js"></script>
<script src="assets/js/rickshaw/rickshaw.min.js"></script>
<script src="assets/js/raphael-min.js"></script>
<script src="assets/js/morris.min.js"></script>
<script src="assets/js/toastr.js"></script>
<script src="assets/js/neon-chat.js"></script>
<script src="assets/js/neon-custom.js"></script>
<script src="assets/js/neon-demo.js"></script>
</body>
</html>